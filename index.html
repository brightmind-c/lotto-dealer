<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏´‡∏ß‡∏¢</title>
  <style>
    body {
      font-family: 'Sarabun', sans-serif;
      background: #f8f9fa;
      padding: 20px;
      max-width: 850px;
      margin: auto;
    }

    h1, h2 {
      margin-top: 30px;
    }

    label, input, select {
      font-size: 16px;
    }

    input[type="text"], input[type="number"] {
      width: 80px;
      margin-right: 10px;
    }

    .form-section {
      margin-bottom: 10px;
      padding: 10px;
      background: #ffffff;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .form-group {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
    }

    button {
      padding: 6px 12px;
      font-size: 16px;
      background-color: #1e88e5;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .clear-btn {
      background-color: #9e9e9e;
    }

    .delete-btn {
      background-color: #e53935;
    }

    table {
      width: 100%;
      margin-top: 10px;
      border-collapse: collapse;
    }

    th, td {
      padding: 6px;
      border: 1px solid #ccc;
      text-align: center;
    }

    th {
      background-color: #e3f2fd;
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 10px;
    }

    .draw-inputs input {
      width: 50px;
      text-align: center;
    }

    .draw-inputs {
      display: flex;
      align-items: center;
      gap: 5px;
    }
  </style>
</head>
<body>

  <h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏•‡∏Ç‡∏´‡∏ß‡∏¢</h1>

  <!-- ===== 3 ‡∏ï‡∏±‡∏ß input ===== -->
  <div class="form-section">
    <div class="form-group">
      <strong>3 ‡∏ï‡∏±‡∏ß</strong>
      <input type="text" id="threeDigitNumber" maxlength="3" placeholder="‡πÄ‡∏•‡∏Ç">
      <input type="number" id="threeDigitAmount" min="1" placeholder="‡∏ö‡∏≤‡∏ó">
      <label><input type="checkbox" id="threeDigitTop"> ‡πÄ‡∏ï‡πá‡∏á</label>
      <label><input type="checkbox" id="threeDigitReverse"> ‡∏Å‡∏•‡∏±‡∏ö</label>
      <label><input type="checkbox" id="threeDigitBottom"> ‡∏•‡πà‡∏≤‡∏á</label>
      <label><input type="checkbox" id="threeDigitTod"> ‡πÇ‡∏ï‡πä‡∏î</label>
      <button onclick="addThreeDigit()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
      <button class="clear-btn" onclick="clearThreeDigit()">Clear</button>
    </div>
  </div>

  <!-- ===== 2 ‡∏ï‡∏±‡∏ß input ===== -->
  <div class="form-section">
    <div class="form-group">
      <strong>2 ‡∏ï‡∏±‡∏ß</strong>
      <input type="text" id="twoDigitNumber" maxlength="2" placeholder="‡πÄ‡∏•‡∏Ç">
      <input type="number" id="twoDigitAmount" min="1" placeholder="‡∏ö‡∏≤‡∏ó">
      <label><input type="checkbox" id="twoDigitTop"> ‡∏ö‡∏ô</label>
      <label><input type="checkbox" id="twoDigitBottom"> ‡∏•‡πà‡∏≤‡∏á</label>
      <label><input type="checkbox" id="twoDigitReverse"> ‡∏Å‡∏•‡∏±‡∏ö</label>
      <button onclick="addTwoDigit()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
      <button class="clear-btn" onclick="clearTwoDigit()">Clear</button>
    </div>
  </div>

  <!-- ===== 3 ‡∏ï‡∏±‡∏ß table ===== -->
  <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ 3 ‡∏ï‡∏±‡∏ß</h2>
  <table>
    <thead>
      <tr>
        <th>‡πÄ‡∏•‡∏Ç‡πÅ‡∏ó‡∏á</th>
        <th>‡πÄ‡∏ï‡πá‡∏á</th>
        <th>‡∏•‡πà‡∏≤‡∏á</th>
        <th>‡πÇ‡∏ï‡πä‡∏î</th>
        <th>‡∏•‡∏ö</th>
      </tr>
    </thead>
    <tbody id="threeDigitTable"></tbody>
  </table>

  <!-- ===== 2 ‡∏ï‡∏±‡∏ß table ===== -->
  <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ 2 ‡∏ï‡∏±‡∏ß</h2>
  <table>
    <thead>
      <tr>
        <th>‡πÄ‡∏•‡∏Ç‡πÅ‡∏ó‡∏á</th>
        <th>‡∏ö‡∏ô</th>
        <th>‡∏•‡πà‡∏≤‡∏á</th>
        <th>‡∏•‡∏ö</th>
      </tr>
    </thead>
    <tbody id="twoDigitTable"></tbody>
  </table>

  <!-- ‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà -->
  <h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏¢</h2>
  <div class="form-section">
    <div class="form-group">
      <label><strong>‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà:</strong></label>
      <input type="text" id="drawDay" maxlength="2" placeholder="‡∏ß‡∏ß">
      <span>/</span>
      <input type="text" id="drawMonth" maxlength="2" placeholder="‡∏î‡∏î">
      <span>/</span>
      <input type="text" id="drawYear" maxlength="2" placeholder="‡∏õ‡∏õ">
    </div>
    <div>
      <button onclick="generatePDF()">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏¢ pdf</button>
    </div>
  </div>

  <!-- ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    function clearTwoDigit() {
      document.getElementById('twoDigitNumber').value = '';
      document.getElementById('twoDigitAmount').value = '';
      document.getElementById('twoDigitTop').checked = false;
      document.getElementById('twoDigitBottom').checked = false;
      document.getElementById('twoDigitReverse').checked = false;
    }

    function clearThreeDigit() {
      document.getElementById('threeDigitNumber').value = '';
      document.getElementById('threeDigitAmount').value = '';
      document.getElementById('threeDigitTop').checked = false;
      document.getElementById('threeDigitBottom').checked = false;
      document.getElementById('threeDigitTod').checked = false;
      document.getElementById('threeDigitReverse').checked = false;
    }

    function addTwoDigit() {
      const number = document.getElementById('twoDigitNumber').value.trim();
      const amount = parseInt(document.getElementById('twoDigitAmount').value.trim());
      const top = document.getElementById('twoDigitTop').checked;
      const bottom = document.getElementById('twoDigitBottom').checked;
      const reverse = document.getElementById('twoDigitReverse').checked;

      if (number.length !== 2 || isNaN(amount) || (!top && !bottom)) {
        alert("‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 2 ‡∏´‡∏•‡∏±‡∏Å, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡∏ö‡∏ô/‡∏•‡πà‡∏≤‡∏á");
        return;
      }

      const table = document.getElementById('twoDigitTable');
      const nums = new Set();
      nums.add(number);
      if (reverse && number[0] !== number[1]) {
        nums.add(number[1] + number[0]);
      }

      nums.forEach(num => {
        const row = table.insertRow();
        row.insertCell(0).innerText = num;
        row.insertCell(1).innerText = top ? amount + "‡∏ø" : "";
        row.insertCell(2).innerText = bottom ? amount + "‡∏ø" : "";
        const del = row.insertCell(3);
        del.innerHTML = `<button class="delete-btn" onclick="this.parentElement.parentElement.remove()">‡∏•‡∏ö</button>`;
      });

      clearTwoDigit();
    }

    function addThreeDigit() {
      const number = document.getElementById('threeDigitNumber').value.trim();
      const amount = parseInt(document.getElementById('threeDigitAmount').value.trim());
      const top = document.getElementById('threeDigitTop').checked;
      const bottom = document.getElementById('threeDigitBottom').checked;
      const tod = document.getElementById('threeDigitTod').checked;
      const reverse = document.getElementById('threeDigitReverse').checked;

      if (number.length !== 3 || isNaN(amount) || (!top && !bottom && !tod)) {
        alert("‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 3 ‡∏´‡∏•‡∏±‡∏Å, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡πÄ‡∏ï‡πá‡∏á/‡∏•‡πà‡∏≤‡∏á/‡πÇ‡∏ï‡πä‡∏î");
        return;
      }

      const table = document.getElementById('threeDigitTable');
      const added = new Set();

      // ‡πÄ‡∏•‡∏Ç‡∏ï‡∏£‡∏á
      const row = table.insertRow();
      row.insertCell(0).innerText = number;
      row.insertCell(1).innerText = top ? amount + "‡∏ø" : "";
      row.insertCell(2).innerText = bottom ? amount + "‡∏ø" : "";
      row.insertCell(3).innerText = tod ? amount + "‡∏ø" : "";
      row.insertCell(4).innerHTML = `<button class="delete-btn" onclick="this.parentElement.parentElement.remove()">‡∏•‡∏ö</button>`;
      added.add(number);

      // ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏ï‡πá‡∏á
      if (reverse && top) {
        const chars = number.split('');
        const perms = new Set();

        const permute = (arr, m = []) => {
          if (arr.length === 0) {
            const result = m.join('');
            if (!added.has(result)) perms.add(result);
          } else {
            for (let i = 0; i < arr.length; i++) {
              let curr = arr.slice();
              let next = curr.splice(i, 1);
              permute(curr.slice(), m.concat(next));
            }
          }
        };

        permute(chars);

        perms.forEach(num => {
          const r = table.insertRow();
          r.insertCell(0).innerText = num;
          r.insertCell(1).innerText = amount + "‡∏ø";
          r.insertCell(2).innerText = "";
          r.insertCell(3).innerText = "";
          r.insertCell(4).innerHTML = `<button class="delete-btn" onclick="this.parentElement.parentElement.remove()">‡∏•‡∏ö</button>`;
        });
      }

      clearThreeDigit();
    }
  </script>

  <!-- ‡πÇ‡∏´‡∏•‡∏î jsPDF ‡πÅ‡∏•‡∏∞ AutoTable -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

  <script>
    function generatePDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const day = document.getElementById('drawDay').value.padStart(2, '0');
    const month = document.getElementById('drawMonth').value.padStart(2, '0');
    const year = '25' + document.getElementById('drawYear').value.padStart(2, '0');
    const drawDate = `${day}/${month}/${year}`;

    doc.setFont('helvetica'); // ‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
    doc.setFontSize(16);
    doc.text(`‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà ${drawDate}`, 15, 20);
    doc.text("2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô", 15, 30);

    const topTable = [];
    const rows = document.querySelectorAll('#twoDigitTable tr');
    rows.forEach(row => {
      const num = row.children[0].innerText;
      const top = row.children[1].innerText.replace('‡∏ø','');
      if (num && top) {
        topTable.push([num, top]);
      }
    });

    doc.autoTable({
      head: [['‡πÄ‡∏•‡∏Ç', '‡∏¢‡∏≠‡∏î‡∏ö‡∏ô']],
      body: topTable,
      startY: 40
    });

    doc.save(`‡πÇ‡∏û‡∏¢‡∏´‡∏ß‡∏¢_${day}-${month}-${year}.pdf`);
  }


  // üß© ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á 10√ó10 ‡∏à‡∏≤‡∏Å‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°
  function buildGrid(totals) {
    const grid = [];
    for (let r = 0; r < 10; r++) {
      const row = [];
      for (let c = 0; c < 10; c++) {
        const num = `${r}${c}`;
        row.push(totals[num] ? `${num}\n${totals[num]}‡∏ø` : '');
      }
      grid.push(row);
    }
    return grid;
  }

  // üìè ‡∏ß‡∏≤‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á 10√ó10 ‡∏ö‡∏ô PDF
  function drawGrid(doc, data, startX, startY) {
    const cellW = 18, cellH = 18;
    doc.setFontSize(10);
    for (let r = 0; r < 10; r++) {
      for (let c = 0; c < 10; c++) {
        const x = startX + c * cellW;
        const y = startY + r * cellH;
        doc.rect(x, y, cellW, cellH);
        const cell = data[r][c];
        if (cell) {
          const [num, val] = cell.split('\n');
          doc.text(num, x + 2, y + 7);
          doc.text(val, x + 2, y + 14);
        }
      }
    }
  }
  </script>

</body>
</html>